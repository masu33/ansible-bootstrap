---

- name: "FILESYSTEM: Applying filesystem settings..."
  file:
    follow:  "{{ __fs.follow  | d(omit) }}"
    force:   "{{ __fs.force   | d(omit) }}"
    group:   "{{ __fs.group   | d(omit) }}"
    mode:    "{{ __fs.mode    | d(omit) }}"
    owner:   "{{ __fs.owner   | d(omit) }}"
    path:    "{{ __fs.path    | d(omit) }}"
    recurse: "{{ __fs.recurse | d(omit) }}"
    src:     "{{ __fs.src     | d(omit) }}"
    state:   "{{ __fs.state   | d(omit) }}"
  with_items: "{{ details.multiple | d([{}]) |
                  map('combine_left', details) |
                  list }}"
  loop_control:
    loop_var: "__fs"
